var MAZ_Loader_Admin_Ajax=function(){function e(){}return e.ajaxCall=function(e,t,i,a){var r=new XMLHttpRequest;if(r.onreadystatechange=function(){4===r.readyState&&(200<=this.status&&this.status<400?a.call(this):alert(this.responseText))},"GET"==e){var n=[];for(var d in i)i.hasOwnProperty(d)&&n.push(d+"="+encodeURIComponent(i[d]));t+="?"+n.join("&")}r.open(e,t),r.send(i)},e.parseAjaxResponse=function(t){try{return JSON.parse(t)}catch(e){return t}},e}(),MAZ_Loader_Admin_Binder=function(){function e(e){this.binded=!1,this.call_bind_type=e?"field":"ui",e&&(this.field_id=e)}var t=e.prototype;return t.addBind=function(e){this.binded||(this.binded=!0);var t={element:e};this.runBind(t)},t.runBind=function(e){var i=this,t=e.element,a=this.getBindData(t);if(!a.listener_override)return"toggle"==a.field_type?(this.handleToggleType(a),void i.updateElement(a)):void t.addEventListener(a.type,function(e){var t=e.target.value;a.value=t,i.updateElement(a)});"rangeslider"==a.field_type?this.handleRangeSliderOverride(a):"toggle"==a.field_type&&this.handleToggleTypeOverride(a)},t.getBindData=function(e){var t=e.getAttribute("data-bind-type"),i=e.getAttribute("data-bind-custom-event");i="1"==i;var a=e.getAttribute("data-bind-target-loader");a="1"==a;var r=e.getAttribute("data-bind-no-escape");r="1"==r;var n=e.getAttribute("id"),d=e.getAttribute("data-field-id"),o=e.getAttribute("data-bind-field-type"),s=e.getAttribute("data-bind-reason"),l=e.getAttribute("data-bind-setting"),c=e.getAttribute("data-bind-context"),u=e.getAttribute("data-bind-field-base-type"),m=e.getAttribute("data-bind-class"),p=e.getAttribute("data-bind-target"),g=e.getAttribute("data-bind-data-att"),f=e.getAttribute("data-bind-listener-override");f="1"==f;var h=JSON.parse(e.getAttribute("data-bind-values")),_={id:n,element:e,type:t,setting:l,reason:s,field_type:o,field_id:d,custom_event:i,context:c,listener_override:f,field_base_type:u,target_loader:a,values:h,class:m,target:p,data_att:g,no_escape:r};return"toggle"==o&&(_.class=e.getAttribute("data-bind-class")),_},t.updateElement=function(e){if("text"==e.field_type?this.handleTextBindType(e):"textarea"==e.field_type?this.handleTextareaBindType(e):"image"==e.field_type?this.handleImageBindType(e):"select"==e.field_type?this.handleSelectBindType(e):"marginpadding"==e.field_type?this.handleMarginPaddingType(e):"lottie"==e.field_type&&this.handleLottieType(e),e.field_base_type){var t=this.getFieldsObjects();"function"==typeof t[e.field_base_type]&&t[e.field_base_type].update(e.field_id)}},t.getFieldsObjects=function(){return{text:MAZ_Loader_Admin_Text_Field,image:MAZ_Loader_Admin_Image_Field,icon:MAZ_Loader_Admin_Icon_Field,percentage_counter:MAZ_Loader_Admin_Percentage_Counter_Field,progress_bar:MAZ_Loader_Admin_Progress_Bar_Field,custom_html:MAZ_Loader_Admin_Custom_HTML_Field,lottie:MAZ_Loader_Admin_Lottie_Field}},t.handleToggleType=function(d){var o=this;new MutationObserver(function(e){e.forEach(function(e){if("attributes"==e.type){var t=e.target.value,i=d.target_loader?o.getLoader():o.getPreviewElement(d);if(i=d.target?i.querySelector(d.target):i,"class_change"==d.reason)if("on"==t){if(i.classList.add(d.class),"has-transition"==d.class){var a=document.querySelector('select[name="mzldr[loader_appearance][transition_style]"]'),r=a.options[a.selectedIndex].value;if(r){var n=o.getLoader();n.classList.contains(r)||n.classList.add(r)}}}else"off"==t&&i.classList.remove(d.class);else if("data-att"==d.reason){if(!d.data_att)return;i.setAttribute(d.data_att,t)}o.updateElement(d)}})}).observe(d.element,{attributes:!0,attributeFilter:["value"]})},t.handleToggleTypeOverride=function(d){var o=this,s=d.element.parentNode.querySelector('input[type="checkbox"]').getAttribute("data-bind-context"),l=d.element.parentNode.querySelector('input[type="checkbox"]').getAttribute("data-bind-reason");document.addEventListener("click",function(e){if("loader_class_change"==d.reason&&"loader_items_side_by_side"==d.context&&e.target.closest(".mzldr-toggle-switch-outer")){var t=e.target.parentNode.querySelector('input[type="checkbox"]'),i=t.getAttribute("data-bind-context"),a=t.getAttribute("data-bind-reason"),r=t.getAttribute("data-bind-target");if(i==s&&a==l){var n=o.getLoader();setTimeout(function(){d.element.checked?n.querySelector(r).classList.add("item_pos_side_by_side"):n.querySelector(r).classList.remove("item_pos_side_by_side")},150),e.preventDefault()}}})},t.handleMarginPaddingType=function(e){var t=e.value,i=e.element.closest(".mzldr-margin-padding-item"),a=i.querySelector('input[type="hidden"]').value,r=i.querySelectorAll(".mp-input-item"),n=i.querySelector('.type input[type="hidden"]').value,d=e.element.getAttribute("data-bind-css-attribute");"all"==a&&r.forEach(function(e){e.value=t});var o=[];r.forEach(function(e){var t={pos:(e.value?e.value:0)+n};o.push(t)});var s=o.map(function(e){return e.pos}).join(" "),l=this.getPreviewElement(e);"padding"==d?l.style.padding=s:"margin"==d&&(l.style.margin=s)},t.getPreviewElement=function(e){var t="",i=e.field_base_type,a=e.field_type,r=e.field_id;return"text"==a||"text"==i?t=document.querySelector('.mazloader-item-wrapper[data-field-id="'+r+'"] .mazloader-item-text'):"image"==a||"image"==i?t=document.querySelector('.mazloader-item-wrapper[data-field-id="'+r+'"] .mazloader-item-image img'):"icon"!=a&&"icon"!=i||(t=document.querySelector('.mazloader-item-wrapper[data-field-id="'+r+'"] .mazloader-item-icon')),t},t.getLoader=function(){return document.querySelector(".mazloader-items .mazloader-item")},t.handleTextBindType=function(e){var t=e.target_loader?this.getLoader():this.getPreviewElement(e);if("value"==e.reason){var i=e.value;e.no_escape||(i=MZLDR_Helper.escapeHtml(i)),e.target?t.querySelector(e.target).innerHTML=i:t.innerHTML=i}else if("font-size"==e.reason)t.style.fontSize=e.value+"px";else{if("loader_custom_css"==e.reason)return void(this.getLoader().querySelector(e.target).innerHTML=e.value);if("data-att"==e.reason){if(!e.data_att)return;t.setAttribute(e.data_att,e.value)}}document.querySelector('.fields-list-items .item.is-active .settings input[data-field-id="'+e.field_id+'"][id="'+e.id+'"]').setAttribute("value",e.value)},t.handleTextareaBindType=function(e){var t=e.target_loader?this.getLoader():this.getPreviewElement(e);if("data-att"==e.reason){if(!e.data_att)return;t.setAttribute(e.data_att,e.value)}document.querySelector('.fields-list-items .item.is-active .settings textarea[data-field-id="'+e.field_id+'"][id="'+e.id+'"]').setAttribute("value",e.value)},t.handleImageBindType=function(e){if(e.custom_event)if("image_css_attribute_change"==e.reason){var t=e.element.getAttribute("data-bind-css-attribute");if("width"==t||"height"==t){var i=this.getPreviewElement(e);"width"==t?i.style.width=e.value:"height"==t&&(i.style.height=e.value)}}else if("custom_url"==e.reason){if("field_img"==e.context)this.getPreviewElement(e).src=e.value,document.querySelector('.fields-list-items .item.is-active .settings[data-field-id="'+e.field_id+'"] img').src=e.value}},t.handleLottieType=function(e){if("css"==e.reason){var t=e.element.getAttribute("data-bind-css-attribute");if(t){var i=this.getPreviewElement(e);"width"==t?i.style.width=e.value:"height"==t?i.style.height=e.value:"max-width"==t&&(i.style.maxWidth=e.value)}}},t.handleSelectBindType=function(e){if(e.custom_event){if("loader_class_change"==e.reason){var t=this.getLoader();if(!t)return;if("loader_content_position"==e.context){var i=e.value,a=t,r="position_";e.target&&(a=a.querySelector(e.target)),MZLDR_Helper.removeClassesThatStartWith(a,r),a.classList.add(r+i)}else if("loader_background_image_type"==e.context){var n=e.value,d=t,o="bg_img_type_";MZLDR_Helper.removeClassesThatStartWith(d,o),d.classList.add(o+n)}else if("loader_background_image_position"==e.context){var s=e.value,l=t,c="bg_img_position_";MZLDR_Helper.removeClassesThatStartWith(l,c),l.classList.add(c+s)}}else if("class_change"==e.reason&&"field_animations"==e.context){var u=this.getPreviewElement(e);if(u.classList.remove("animated"),e.values.forEach(function(e){u.classList.remove(e)}),"none"==e.value)return;var m=MZLDR_Animation.onAnimationEndEvent(),p=e.value.split(" ");p.forEach(function(e){u.classList.add(e)}),m&&u.addEventListener(m,function(){p.forEach(function(e){u.classList.remove(e)})})}}else if("class_change"==e.reason){var g=this.getPreviewElement(e),f=e.value;if("progress_bar"==e.field_base_type){if("progress_bar_position"==e.setting){var h=g.closest(".mazloader-item-wrapper");h.classList.remove("pos_default"),h.classList.remove("pos_top"),h.classList.remove("pos_bottom"),h.classList.add("pos_"+f)}else if("show_percentage"==e.setting){var _=g.querySelector(".mzldr-percentage-counter");"no"==f?_.classList.add("is-hidden"):_.classList.remove("is-hidden")}}else if("select"==e.field_base_type){var v=e.target_loader?this.getLoader():this.getPreviewElement(e);v=e.target?v.querySelector(e.target):v;var y="value"==e.class?e.value:e.class;e.values.forEach(function(e){v.classList.remove(e)}),v.classList.add(y)}}else if("data-att"==e.reason){if(!e.data_att)return;(e.target_loader?this.getLoader():this.getPreviewElement(e)).setAttribute(e.data_att,e.value)}},t.handleRangeSliderOverride=function(r){var n,d=this;if(r.custom_event&&"item_css_attribute_change"==r.reason){if(!this.getLoader())return;MutationObserver=window.MutationObserver||window.WebKitMutationObserver;var e=r.element.querySelector('input[type="hidden"]');n=e,new MutationObserver(function(e,t){if(null!=d.field_id&&"value"==e[0].attributeName){var i=r.element.getAttribute("data-bind-css-attribute"),a=d.getPreviewElement(r);"border-radius"==i?(d.getFieldsListItem().querySelector("img").style.borderRadius=n.value+"%",a.style.borderRadius=n.value+"%"):"font-size"==i?"text"==r.context&&(a.style.fontSize=n.value+"px"):"width"==i?r.target?a.querySelector(r.target).style.width=n.value+r.context:a.style.width=n.value+r.context:"height"==i&&(r.target?a.querySelector(r.target).style.height=n.value+"px":a.style.height=n.value+"px")}}).observe(n,{attributes:!0})}},t.getFieldsListItem=function(){return document.querySelector('.fields-list-items .settings[data-field-id="'+this.field_id+'"]')},t.bindElement=function(e){if(!this.binded){var t=this;if(this.getFieldsListItem())this.getFieldsListItem().querySelectorAll("*[data-bind-type]").forEach(function(e){t.addBind(e)})}},t.bindUIElement=function(e){this.binded||(this.binded=!0,this.addBind(e))},e}(),MAZ_Loader_Admin_Builder=function(){function e(){this.admin_panel="",this.admin_form="",this.loader_type_hidden_field="",this.demo_browser_page="",this.mazloader_preview="",this.ajaxRunning=!1,this.loading=!1,this.ajax_type="",this.duplicate_field_id="",this.loader_new_field_id=0,this.ui_binds=[],this.initial_submission_type="",this.fields=new MAZ_Loader_Admin_Fields,this.browser_responsive=new MAZ_Loader_Admin_Responsive}var t=e.prototype;return t.init=function(){this.initVariables(),this.handleConfirms(),this.handleShortcodeButton(),this.admin_panel&&this.admin_form&&(this.handleEditPageInitLoad(),this.handleNewFieldItemClick(),this.handleFieldItemActions(),this.handleFieldListItemClick(),this.handleLoaderTypeSwitch(),this.handleUIBinds(),this.drag=new MAZ_Loader_Admin_Field_Draggable,this.handleMazloaderFieldsClick(),this.browser_responsive.init(),this.handleRunLoaderButton(),this.handleEvents(),this.conditionize=new MZLDR_Conditionize)},t.initVariables=function(){document.querySelector("#mazloader-admin")&&(this.admin_panel=document.querySelector("#mazloader-admin"),this.loader_type_hidden_field=this.admin_panel.querySelector('input[type="hidden"][name="mzldr[loader_type]"]'),this.admin_form=this.admin_panel.querySelector("form#maz-loader-form"),this.admin_panel.querySelector(".browser-page")&&(this.demo_browser_page=this.admin_panel.querySelector(".browser-page"),this.mazloader_preview=this.demo_browser_page.querySelector("#mazloader-preview"),this.loading=this.demo_browser_page.querySelector(".mazloader-preview-loading")),this.admin_form&&(this.fields_list_items=this.admin_form.querySelector(".fields-list-items"),this.initial_submission_type=document.querySelector('input[type="hidden"][name="submission_type"]').value))},t.handleShortcodeButton=function(){document.addEventListener("click",function(e){var t=e.target.closest(".mzldr-copy-loader-shortcode-btn");if(t){var i='[mzldr loader_id="'+t.getAttribute("data-loader-id")+'"]',a=mzldr_builder_vars.shortcode_alert+"\n"+i;MZLDR_Helper.copyToClipboard(i),alert(a),e.preventDefault()}})},t.handleEvents=function(){MZLDR_Helper.loaderTitleValueValidation()},t.handleRunLoaderButton=function(){var d=this;document.querySelector(".mzldr-run-loader-btn").addEventListener("click",function(e){var t=document.querySelector(".mazloader-items .mazloader-item"),i=e.target;if(i.classList.contains("is-disabled"))return e.preventDefault(),!1;if(d.fields.getFields().length){document.body.classList.remove("mazloader-loaded"),i.classList.add("is-disabled");var a=i.innerHTML;i.innerHTML=mzldr_builder_vars.running,i.disabled=!0,t.classList.add("is-hidden");var r=MZLDR_Helper.getLoaderLoadingTime(),n=300+parseFloat(document.querySelector('input[name="mzldr[loader_settings][delay]"]').value);setTimeout(function(){t.classList.remove("is-hidden"),0<n&&t.classList.remove("is-hidden"),setTimeout(function(){t.classList.contains("has-transition")||t.classList.add("is-hidden"),i.classList.remove("is-disabled"),i.innerHTML=a,i.disabled=!1,t.classList.contains("has-transition")||setTimeout(function(){t.classList.remove("is-hidden")},300),document.body.classList.add("mazloader-loaded"),setTimeout(function(){document.body.classList.remove("mazloader-loaded")},1e3)},r)},n)}e.preventDefault()})},t.handleEditPageInitLoad=function(){if("edit"==this.admin_form.querySelector('input[type="hidden"][name="submission_type"]').value){var n=this,e=MZLDR_Helper.getLoaderLoadingTime();document.querySelectorAll(".fields-list-items .item").forEach(function(e){var t=parseInt(e.querySelector('input[type="hidden"].field_item_id').value,10),i=e.querySelector('input[type="hidden"].field_item_type').value;if(n.fields.getFieldsList().includes(i)){var a,r={id:t,type:i};switch(i){case"text":a=new MAZ_Loader_Admin_Text_Field(r);break;case"image":a=new MAZ_Loader_Admin_Image_Field(r);break;case"icon":a=new MAZ_Loader_Admin_Icon_Field(r)}a.onPreviewLoaded(),n.fields.appendField(a)}}),n.fields.getFields().length&&(this.loader_new_field_id=Math.max.apply(Math,n.fields.getFields().map(function(e){return e.id}))),this.initial_submission_type=document.querySelector('input[type="hidden"][name="submission_type"]').value,setTimeout(function(){document.body.classList.add("mazloader-loaded"),setTimeout(function(){document.body.classList.remove("mazloader-loaded")},1e3)},e)}},t.handleFieldListItemClick=function(){this.fields_list_items&&document.addEventListener("click",function(e){var t=e.target.closest(".item");if(e.target.closest(".field-item-actions"))return!1;e.target.closest(".title")&&e.target.closest(".item")&&(t.classList.toggle("is-active"),item_settings=t.querySelector(".settings"),MZLDR_Animation.slideToggle(item_settings,300)),e.stopPropagation()})},t.handleNewFieldItemClick=function(){var n=this;this.ajaxRunning||document.querySelector(".fields-items-selector").addEventListener("click",function(e){var t=e.target.closest(".field-item");if(t&&!t.classList.contains("mzldr-pro")){var i=t.getAttribute("data-item");if(n.fields.getFieldsList().includes(i)){var a=null;n.loader_new_field_id=n.loader_new_field_id+1;var r={id:n.loader_new_field_id,type:i};switch(i){case"text":a=new MAZ_Loader_Admin_Text_Field(r);break;case"image":a=new MAZ_Loader_Admin_Image_Field(r);break;case"icon":a=new MAZ_Loader_Admin_Icon_Field(r)}null!=a&&(n.fields.appendField(a),n.ajax_type="new_field",n.switchToSettingsPage("fields-list"),n.previewUpdate()),e.preventDefault()}}})},t.handleUIBinds=function(){var i=this;document.querySelectorAll("*[data-bind-ui]").forEach(function(e){var t={binder:new MAZ_Loader_Admin_Binder};t.binder.bindUIElement(e),i.ui_binds.push(t)})},t.switchToSettingsPage=function(e){this.admin_panel.querySelector(".sidebar .top-menu a.is-active").classList.remove("is-active"),this.admin_panel.querySelector(".sidebar .settings-pages .setting-page.is-active").classList.remove("is-active"),this.admin_panel.querySelector('.sidebar .top-menu a[data-page-id="'+e+'"]').classList.add("is-active"),this.admin_panel.querySelector('.sidebar .settings-pages .setting-page[data-page-id="'+e+'"]').classList.add("is-active")},t.previewUpdate=function(){if(!this.ajaxRunning){this.ajaxRunning=!0,this.loading.classList.add("is-visible");var n=this;this.admin_form.querySelector('input[name="submission_type"]').setAttribute("value",this.ajax_type);var e=new FormData(this.admin_form),d=[].concat(this.fields.getFields()).pop();d&&d.binderUpdate(),e.set("action","preview_maz_loader"),"delete_field"!=this.ajax_type&&e.set("field_type",d.type),"duplicate_field"==this.ajax_type&&(e.set("duplicate_field_id",this.duplicate_field_id),e.set("loader_new_field_id",this.loader_new_field_id)),"new_field"==this.ajax_type&&e.set("loader_new_field_id",this.loader_new_field_id),MAZ_Loader_Admin_Ajax.ajaxCall("POST",mzldr_js_object.ajax_url,e,function(e){var t=MAZ_Loader_Admin_Ajax.parseAjaxResponse(this.responseText);if(t.error)alert(t.message);else if(n.mazloader_preview.innerHTML=t.preview,"delete_field"!=n.ajax_type&&n.mazloader_preview.querySelector(".mazloader-item .mazloader-item-wrapper:last-child")&&n.mazloader_preview.querySelector(".mazloader-item .mazloader-item-wrapper:last-child").classList.add("user-notify"),n.ajaxRunning=!1,n.loading.classList.remove("is-visible"),"new_field"==n.ajax_type||"duplicate_field"==n.ajax_type){n.admin_panel.querySelector('.sidebar .settings-pages .setting-page[data-page-id="fields-list"] > .message').classList.add("is-hidden");var i=n.fields_list_items.querySelectorAll(".item.is-active");i.length&&i.forEach(function(e){MZLDR_Animation.slideUp(e.querySelector(".settings"),300),e.classList.remove("is-active")});var a=document.createElement("div");a.classList.add("item"),a.innerHTML=t.last_field_settings,n.fields_list_items.appendChild(a),n.fields_list_items.lastChild.classList.add("is-active"),n.switchToSettingsPage("fields-list"),(d=[].concat(n.fields.getFields()).pop())&&(d.onPreviewLoaded(),d.init())}else if("delete_field"==n.ajax_type)if(n.fields.getFields().length){var r=n.fields_list_items.querySelector(".item:last-child");r.classList.add("is-active"),MZLDR_Animation.slideDown(r.querySelector(".settings"),300)}else document.querySelector(".settings-pages .setting-page.is-active .fields-list-items").innerHTML="",n.mazloader_preview.querySelector(".mazloader-item").classList.add("is-hidden"),n.admin_panel.querySelector(".sidebar .settings-pages .setting-page.is-active > .message").classList.remove("is-hidden")}),document.querySelector('input[type="hidden"][name="submission_type"]').value=this.initial_submission_type}},t.handleFieldItemActions=function(){var d=this;document.addEventListener("click",function(e){if(e.target.closest(".field-action-item")){var t=e.target.closest(".field-action-item"),i=t.getAttribute("data-action"),a=t.getAttribute("data-field-id");if("duplicate"==i){if(!confirm(mzldr_builder_vars.duplicate_warning))return void e.preventDefault();var r=d.fields.getFieldById(a),n=Object.assign(Object.create(Object.getPrototypeOf(r)),r);d.duplicate_field_id=n.id,d.loader_new_field_id=d.loader_new_field_id+1,n.id=d.loader_new_field_id,d.fields.duplicateField(n),d.ajax_type="duplicate_field",d.previewUpdate()}else if("delete"==i){if(!confirm(mzldr_builder_vars.delete_warning))return void e.preventDefault();document.querySelector('.settings-pages .setting-page .fields-list-items .item .settings[data-field-id="'+a+'"]').parentNode.parentNode.remove(),d.fields.deleteFieldById(a),d.ajax_type="delete_field",d.previewUpdate()}e.preventDefault()}})},t.handleLoaderTypeSwitch=function(){if(this.admin_panel.querySelector(".mzldr-loader-switch-input")){var i=this;this.admin_panel.querySelector(".mzldr-loader-switch-input").addEventListener("change",function(e){var t=e.target.checked?"transition":"loader";i.loader_type_hidden_field.value=t})}},t.handleConfirms=function(){document.addEventListener("click",function(e){var t=e.target.closest(".mzldr-confirm-popup");if(t&&t.hasAttribute("data-mzldr-confirm")){var i=e.target.closest(".mzldr-confirm-popup").getAttribute("data-mzldr-confirm-message");if(!MZLDR_Helper.confirm(i))return e.preventDefault(),!1}})},t.handleMazloaderFieldsClick=function(){var r=this;document.addEventListener("click",function(e){var t=e.target.closest(".mazloader-item-wrapper");if(!e.target.closest(".field-item-actions")&&t){r.switchToSettingsPage("fields-list");var i=t.getAttribute("data-field-id");r.fields_list_items.querySelectorAll(".item.is-active").forEach(function(e){e.querySelector(".settings").style.display="none",e.classList.remove("is-active")});var a=r.fields_list_items.querySelector('.item .title[data-field-id="'+i+'"]').closest(".item");a.classList.add("is-active"),MZLDR_Animation.slideDown(a.querySelector(".settings"),300),e.preventDefault()}})},e}(),MZLDR_Helper=function(){function e(){}function t(e){return i.apply(this,arguments)}var i;return e.live=function(e,r,n){document.addEventListener(e,function(e){var t=r;if(t){for(var i=e.target,a=-1;i&&-1===(a=Array.prototype.indexOf.call(t,i));)i=i.parentElement;-1<a&&n.call(i,e)}})},e.onReady=function(e){"loading"==document.readyState?document.addEventListener("DOMContentLoaded",e):e()},e.addAlphaToHex=function(e,t){return e=e.replace("#",""),r=parseInt(e.substring(0,2),16),g=parseInt(e.substring(2,4),16),b=parseInt(e.substring(4,6),16),result="rgba("+r+","+g+","+b+","+t/100+")",result},e.copyToClipboard=function(e){var t=document.createElement("input");t.classList.add("mzldr-clipboard-dummy-input"),document.body.appendChild(t),t.value=e,t.select(),document.execCommand("copy"),document.body.removeChild(t)},e.removeClassesThatStartWith=function(e,t){var i=e.className.split(" ").filter(function(e){return!e.startsWith(t)});e.className=i.join(" ").trim()},e.confirm=(i=function(e){return!!confirm(e)},t.toString=function(){return i.toString()},t),e.escapeHtml=function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return e.replace(/[&<>"']/g,function(e){return t[e]})},e.loaderTitleValueValidation=function(){var e=document.querySelector(".mazloader-header-title");e&&e.addEventListener("paste",function(e){if(e.preventDefault(),e.clipboardData&&e.clipboardData.getData){var t=e.clipboardData.getData("text/plain");document.execCommand("insertHTML",!1,t)}})},e.getLoaderLoadingTime=function(){var e=parseFloat(document.querySelector('input[name="mzldr[loader_settings][minimum_loading_time]"]').value);e=isNaN(e)?0:e;var t=parseFloat(document.querySelector('input[name="mzldr[loader_settings][duration]"]').value);return e+(t=isNaN(t)?0:t)},e}(),MAZ_Loader_Admin_Loader_List=function(){function e(){this.handleToggleSwitch()}return e.prototype.handleToggleSwitch=function(){var e=document.querySelector("#mazloader-list-table .mzldr-toggle-switch");if(e){e.addEventListener("change",function(e){e.target.checked})}},e}(),MZLDR_Admin=function(){function e(){this.builder=new MAZ_Loader_Admin_Builder,this.init()}var t=e.prototype;return t.init=function(){this.settingsPages(),this.builder.init(),this.detectLoaderTitleChange(),(new MAZ_Loader_Admin_UI).init()},t.settingsPages=function(){for(var e=document.querySelectorAll("#mazloader-admin .mazloader-content .sidebar .top-menu .row a"),t=0;t<e.length;t++)e[t].addEventListener("click",function(e){if(!this.classList.contains("is-active")){document.querySelector("#mazloader-admin .mazloader-content .sidebar .top-menu a.is-active").classList.remove("is-active"),this.classList.add("is-active");var t=this.getAttribute("data-page-id");document.querySelector("#mazloader-admin .settings-pages .setting-page.is-active").classList.remove("is-active"),document.querySelector('#mazloader-admin .settings-pages .setting-page[data-page-id="'+t+'"]').classList.add("is-active"),e.preventDefault()}})},t.detectLoaderTitleChange=function(){var e=document.querySelector(".mazloader-header-title.action-new");void 0!==e&&null!=e&&e.addEventListener("input",function(e){var t=e.target.innerText;document.querySelector('#maz-loader-form input[type="hidden"][name="mzldr[loader_name]"]').value=t})},e}();document.addEventListener("DOMContentLoaded",function(e){new MZLDR_Admin});var MZLDR_Logger=function(){function e(){this.logging_enabled=mzldr_js_object.logging_enabled}return e.log=function(e){this.logging_enabled&&console.log("[MAZ Loader Logger]: "+e)},e}(),MZLDR_Animation=function(){function e(){}return e.slideUp=function(e,t){void 0===t&&(t=500),e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.boxSizing="border-box",e.style.height=e.offsetHeight+"px",e.offsetHeight,e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,window.setTimeout(function(){e.style.display="none",e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property")},t)},e.slideDown=function(e,t){void 0===t&&(t=500),e.style.removeProperty("display");var i=window.getComputedStyle(e).display;"none"===i&&(i="block"),e.style.display=i;var a=e.offsetHeight;e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,e.offsetHeight,e.style.boxSizing="border-box",e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=a+"px",e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),window.setTimeout(function(){e.style.removeProperty("height"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property")},t)},e.slideToggle=function(e,t){return void 0===t&&(t=500),"none"===window.getComputedStyle(e).display?this.slideDown(e,t):this.slideUp(e,t)},e.onTransitionEndEvent=function(){var e,t=document.createElement("fakeelement"),i={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in i)if(void 0!==t.style[e])return i[e]},e.onAnimationEndEvent=function(){var e,t=document.createElement("fakeelement"),i={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(e in i)if(void 0!==t.style[e])return i[e]},e}(),MAZ_Loader_Admin_Field_Draggable=function(){function e(){this.drag_class_name="mazloader-draggable-field-item",this.canDrag=!1,this.dragging_field_id="",this.bindDrag()}var t=e.prototype;return t.bindDrag=function(){var t=this;MZLDR_Logger.log("Initializing Draggable Events"),document.addEventListener("dragstart",function(e){1==t.getNumberOfFields()?t.canDrag=!1:t.canDrag=!0,t.canDrag&&t.onDragStart(e)}),document.addEventListener("dragenter",function(e){t.canDrag&&t.onDragEnter(e)}),document.addEventListener("dragover",function(e){t.canDrag&&t.onDragOver(e)}),document.addEventListener("dragleave",function(e){t.canDrag&&t.onDragLeave(e)}),document.addEventListener("drop",function(e){t.canDrag&&t.onDrop(e)})},t.getFieldsListItems=function(){return document.querySelector(".fields-list-items")},t.getNumberOfFields=function(){var e=this.getFieldsListItems().querySelector(".item");return e?e.length:0},t.onDragStart=function(e){var t=e.target.closest("."+this.drag_class_name);if(t){var i=t.getAttribute("data-field-id");MZLDR_Logger.log("onDragStart for field id: "+i),this.dragging_field_id=i,e.dataTransfer.setData("FieldID",i)}},t.onDragEnter=function(e){var t=e.target.closest("."+this.drag_class_name);if(t){var i=t.getAttribute("data-field-id");if(MZLDR_Logger.log("onDragEnter for field id: "+i),this.dragging_field_id==i)return;t.classList.contains("drag-hoverable")||t.classList.add("drag-hoverable")}},t.onDragOver=function(e){e.preventDefault()},t.onDragLeave=function(e){var t=e.target.closest("."+this.drag_class_name);if(t){var i=t.getAttribute("data-field-id");MZLDR_Logger.log("onDragLeave for field id: "+i),t.classList.contains("drag-hoverable")&&t.classList.remove("drag-hoverable")}},t.onDrop=function(e){e.preventDefault();var t=e.target.closest("."+this.drag_class_name);if(t){var i=t.getAttribute("data-field-id");if(MZLDR_Logger.log("onDrop for field id: "+i),t.classList.contains("drag-hoverable")){var a=document.querySelector('.fields-list-items .mazloader-draggable-field-item[data-field-id="'+this.dragging_field_id+'"]').parentNode,r=t.parentNode;this.swap(r,a),document.querySelector(".fields-list-items .item .title.drag-hoverable").classList.remove("drag-hoverable"),document.querySelectorAll(".fields-list-items .item.is-active").forEach(function(e){e.querySelector(".settings").style.display="none",e.classList.remove("is-active")}),MZLDR_Animation.slideDown(a.parentNode.querySelector(".settings"),300),a.parentNode.classList.add("is-active"),r.querySelector(".title").classList.remove("drag-hoverable"),this.getFieldsListItems().classList.remove("fired-events");var n=document.querySelector('.mazloader-item-wrapper[data-field-id="'+this.dragging_field_id+'"]'),d=document.querySelector('.mazloader-item-wrapper[data-field-id="'+i+'"]');this.swap(d,n)}}},t.swap=function(e,t){var i=e.parentNode,a=t.parentNode,r=t.nextSibling;return r===e&&(r=r.nextSibling),i.replaceChild(t,e),r?a.insertBefore(e,r):a.appendChild(e),!0},e}(),MAZ_Loader_Admin_Field=function(){function e(e){this.id=parseInt(e.id),this.type=e.type,this.binder=new MAZ_Loader_Admin_Binder(this.id),this.ui=new MAZ_Loader_Admin_UI}var t=e.prototype;return t.init=function(){},e.update=function(e){},t.binderUpdate=function(){this.binder.field_id=this.id,this.binder.binded=!1},t.getField=function(){return document.querySelector('.mazloader-item-wrapper[data-field-id="'+this.id+'"]')},t.getInnerField=function(){return document.querySelector('.mazloader-item-wrapper[data-field-id="'+this.id+'"] .mazloader-inner-item')},t.getFieldsListItem=function(){return document.querySelector('.fields-list-items .settings[data-field-id="'+this.id+'"]')},t.getFieldElement=function(){return document.querySelector('.mazloader-items .mazloader-item .mazloader-item-wrapper[data-field-id="'+this.id+'"] .mazloader-item-image img')},t.onPreviewLoaded=function(){var t=this;if(!this.binder.binded){if(this.getFieldsListItem()){var e=this.getFieldsListItem().querySelectorAll("input.mzldr-control-color-picker-item");e&&e.forEach(function(e){t.ui.renderColorPicker(e)})}this.binder.bindElement(this.id)}},e}(),MAZ_Loader_Admin_Fields=function(){function e(){this.fields=[]}var t=e.prototype;return t.appendField=function(e){this.fields.push(e)},t.duplicateField=function(e){this.appendField(e)},t.getFieldsList=function(){return["text","image","icon","progress_bar","percentage_counter","custom_html","lottie"]},t.deleteFieldById=function(t){var e=this.getFields();e.splice(e.findIndex(function(e){return parseInt(e.id)===parseInt(t)}),1)},t.getFields=function(){return this.fields},t.getFieldsCount=function(){return this.fields.length},t.getFieldById=function(t){var i;return this.getFields().filter(function(e){return parseInt(e.id)===parseInt(t)}).map(function(e){i=e}),i},e}();function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}var MAZ_Loader_Admin_Icon_Field=function(t){function e(e){return t.call(this,e)||this}_inheritsLoose(e,t);var i=e.prototype;return i.binderUpdate=function(){t.prototype.binderUpdate.call(this)},i.onPreviewLoaded=function(){t.prototype.onPreviewLoaded.call(this)},e}(MAZ_Loader_Admin_Field);function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}var MAZ_Loader_Admin_Image_Field=function(a){function e(e){var t;return(t=a.call(this,e)||this).field_data=e,t.media_uploader,t}_inheritsLoose(e,a);var t=e.prototype;return t.init=function(){},t.binderUpdate=function(){a.prototype.binderUpdate.call(this)},t.onPreviewLoaded=function(){a.prototype.onPreviewLoaded.call(this);var e=this.getFieldsListItem(),t=e.querySelector('input[data-bind-css-attribute="width"]').value;this.getFieldElement().style.width=t;var i=e.querySelector('input[data-bind-css-attribute="height"]').value;this.getFieldElement().style.height=i},e}(MAZ_Loader_Admin_Field);function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}var MAZ_Loader_Admin_Lottie_Field=function(t){function e(e){return t.call(this,e)||this}_inheritsLoose(e,t),e.update=function(e){var t=document.querySelector('.mazloader-item-wrapper[data-field-id="'+e+'"] .mazloader-item-lottie');t.innerHTML="";var i={loader_id:t.dataset.loader_id,id:t.dataset.id,method:t.dataset.source,json:t.dataset.json,url:t.dataset.url,num_of_times:parseInt(t.dataset.numOfTimes),loop:"on"==t.dataset.loop};t.setAttribute("data-settings",JSON.stringify(i)),new MZLDR_Lottie_Item(t)};var i=e.prototype;return i.binderUpdate=function(){t.prototype.binderUpdate.call(this)},i.onPreviewLoaded=function(){t.prototype.onPreviewLoaded.call(this),new MZLDR_Conditionize},e}(MAZ_Loader_Admin_Field);function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}var MAZ_Loader_Admin_Text_Field=function(t){function e(e){return t.call(this,e)||this}_inheritsLoose(e,t);var i=e.prototype;return i.binderUpdate=function(){t.prototype.binderUpdate.call(this)},i.onPreviewLoaded=function(){t.prototype.onPreviewLoaded.call(this),this.text=this.getInnerField().innerHTML},e}(MAZ_Loader_Admin_Field),MZLDR_Conditionize=function(){function e(){this.conditions=document.querySelectorAll(".mzldr-conditionize"),this.hideJS=!0,this.init()}var t=e.prototype;return t.init=function(){var t=this;this.conditions&&this.conditions.forEach(function(e){t.conditionize(e)})},t.conditionize=function(e){var t='.mzldr-control-input-item[name="'+e.getAttribute("data-mzldr-cond-option")+'"]',i=e.getAttribute("data-mzldr-cond-value"),a=e,r=this,n=document.querySelector(t);n.type&&"checkbox"==n.type?new MutationObserver(function(e){e.forEach(function(e){"attributes"==e.type&&r.showOrHide(t,i,a)})}).observe(n,{attributes:!0}):n.addEventListener("change",function(e){r.showOrHide(t,i,a)});this.hideJS&&(e.closest(".mzldr-control-group").style.display="none"),this.showOrHide(t,i,a)},t.showOrHide=function(e,t,i){var a=document.querySelector(e);i=i.closest(".mzldr-control-group"),(a.type&&"select-one"===a.type||a.type&&"text"===a.type)&&a.value==t?MZLDR_Animation.slideDown(i):a.type&&"checkbox"===a.type&&a.value==t?MZLDR_Animation.slideDown(i):MZLDR_Animation.slideUp(i)},e}(),MAZ_Loader_Admin_Pro_Popup=function(){function e(){this.popup=document.querySelector("#fa-pro-popup"),this.anyPopupsExist()&&(this.init(),this.handlePopupClose())}var t=e.prototype;return t.anyPopupsExist=function(){return!!document.querySelectorAll(".mzldr-pro-upgrade-button").length},t.init=function(){var a=this;document.addEventListener("click",function(e){var t=e.target.closest(".mzldr-pro-upgrade-button");if(t){var i=t.getAttribute("data-title");a.setReason(i),a.popup.classList.toggle("is-visible"),e.preventDefault()}})},t.setReason=function(e){this.popup.querySelector(".reason").innerHTML=e},t.handlePopupClose=function(){var t=this;document.addEventListener("click",function(e){if(!e.target.closest(".fa-pro-popup-close"))return!1;t.popup.classList.toggle("is-visible"),e.preventDefault()})},e}();document.addEventListener("DOMContentLoaded",function(e){new MAZ_Loader_Admin_Pro_Popup});var MAZ_Loader_Admin_Responsive=function(){function e(){}var t=e.prototype;return t.init=function(){this.handleResponseButtons()},t.handleResponseButtons=function(){document.addEventListener("click",function(e){var t=e.target.closest(".mzldr-responsive-button");if(t){var i=t.getAttribute("data-mode");document.querySelector(".mzldr-responsive-button.is-active").classList.remove("is-active"),t.classList.add("is-active");var a=document.querySelector(".mazloader-preview-browser");a.classList.remove("desktop"),a.classList.remove("tablet"),a.classList.remove("mobile"),a.classList.add(i),e.preventDefault()}})},e}(),MAZ_Loader_Admin_UI_Device_Control=function(){function e(){this.devices=document.querySelector(".mzldr-device-control-item-value"),this.initEvent()}return e.prototype.initEvent=function(){var r=this;document.querySelectorAll(".mzldr-device-control-item").forEach(function(a){a.addEventListener("click",function(e){a.classList.toggle("is-active");var t=[];document.querySelectorAll(".mzldr-device-control-item.is-active").forEach(function(e){t.push(e.getAttribute("data-device"))});var i=t.join();r.devices.value=i,e.preventDefault()})})},e}(),MAZ_Loader_Admin_UI_Range_Slider=function(){function e(e){this.rangeSlider=e,this.rangeSliderButton=this.rangeSlider.firstElementChild,this.rangeSliderLabel=this.rangeSlider.querySelector(".mzldr-range-slider-label"),this.rangeSliderHiddenInput=this.rangeSlider.querySelector('input[type="hidden"]'),this.buttonOffset=0,this.maxHandlePos=this.rangeSlider.offsetWidth-this.rangeSliderButton.offsetWidth,this.value=this.rangeSlider.getAttribute("data-value"),this.type=this.rangeSlider.getAttribute("data-range-slider-type"),this.step=1,this.min=0,this.max=this.rangeSlider.getAttribute("data-max"),this.toFixed=(this.step+"").replace(".","").length-1,this.isMoving=!1,this.bind=new MAZ_Loader_Admin_Binder}var t=e.prototype;return t.renderRangeSlider=function(){var t=this;this.bind.bindUIElement(this.rangeSlider),this.rangeSlider.addEventListener("mousedown",function(e){t.isMoving=!0,t.knobOffset=e.clientX-t.rangeSliderButton.offsetLeft,t.isMoving&&t.moveRangeSlider(e)}),document.addEventListener("mouseup",function(e){t.isMoving=!1}),document.addEventListener("mousemove",function(e){t.isMoving&&t.moveRangeSlider(e)})},t.moveRangeSlider=function(e){this.maxHandlePos=this.rangeSlider.offsetWidth-this.rangeSliderButton.offsetWidth;var t=this.getPosition(e.clientX),i=Math.floor(t/this.maxHandlePos*100);this.rangeSliderButton.style.marginLeft=t+"px",this.rangeSliderLabel.style.marginLeft=t+"px",this.rangeSliderButton.value=i;var a=this.getValueFromPosition(this.cap(t,0,this.maxHandlePos));this.rangeSliderLabel.innerHTML=a+this.type,95<i?this.rangeSliderLabel.classList.add("at-end"):this.rangeSliderLabel.classList.remove("at-end"),this.rangeSliderHiddenInput.value=a},t.getPosition=function(e){this.maxHandlePos=this.rangeSlider.offsetWidth-this.rangeSliderButton.offsetWidth;var t=e-this.rangeSlider.offsetLeft-this.knobOffset+15;return t>this.maxHandlePos?this.maxHandlePos:t<this.min?this.min:t},t.cap=function(e,t,i){return e<t?this.min:i<e?this.max:e},t.getValueFromPosition=function(e){var t,i;return t=e/(this.maxHandlePos||1),i=this.step*Math.round(t*(this.max-this.min)/this.step)+this.min,Number(i.toFixed(this.toFixed))},e}(),MAZ_Loader_Admin_UI=function(){function e(){}var t=e.prototype;return t.init=function(){this.handleToggleSwitch(),this.handleOnLoadColorPickers(),this.handleImagePicker(),this.handleRangeSliders(),this.handleImageResetButton(),this.handleMarginPaddingBox(),this.handleTabs(),this.handleIconsField(),this.handleDeviceControl(),this.media_uploader=""},t.handleDeviceControl=function(){new MAZ_Loader_Admin_UI_Device_Control},t.handleIconsField=function(){document.addEventListener("click",function(e){var t=e.target.closest(".icon"),i=e.target.closest(".mzldr-icons-field");if(t&&i){var a=e.target.closest(".settings").getAttribute("data-field-id"),r=i.querySelector('input[type="hidden"][class="icon_value"]'),n=i.querySelector('input[type="hidden"][class="icon_tab_value"]'),d=t.getAttribute("data-icon-id"),o=t.closest(".mzldr-panel").getAttribute("data-tab-id");i.querySelectorAll(".icon.is-active").forEach(function(e){e.classList.remove("is-active")}),i.querySelector(".mzldr-panel.is-active").classList.remove("is-active"),i.querySelector('.mzldr-panel[data-tab-id="'+o+'"]').classList.add("is-active"),t.classList.add("is-active"),r.value=d,n.value=o;var s=document.querySelector('.mazloader-items .mazloader-item .mazloader-item-wrapper[data-field-id="'+a+'"] .mazloader-item-icon');s&&(s.innerHTML=t.innerHTML),e.preventDefault()}})},t.handleTabs=function(){document.addEventListener("click",function(e){if(e.target.classList.contains("mzldr-tab")){var t=e.target.getAttribute("data-tab-id");e.target.parentNode.querySelector(".mzldr-tab.is-active").classList.remove("is-active"),e.target.parentNode.parentNode.querySelector(".mzldr-panel.is-active").classList.remove("is-active"),e.target.classList.add("is-active"),e.target.parentNode.parentNode.querySelector('.mzldr-panel[data-tab-id="'+t+'"]').classList.add("is-active"),e.preventDefault()}})},t.handleToggleSwitch=function(){document.addEventListener("click",function(e){if(e.target.closest(".mzldr-toggle-switch-outer")){var t=e.target.closest(".mzldr-toggle-switch-outer"),i=t.querySelector('input[type="checkbox"]');t.classList.contains("is-checked")?(t.classList.remove("is-checked"),i&&(i.removeAttribute("checked"),i.value="off")):(t.classList.add("is-checked"),i&&(i.setAttribute("checked","checked"),i.value="on"))}})},t.handleMarginPaddingBox=function(){document.addEventListener("click",function(e){var t=e.target.closest(".link-button");if(t){var i=t.querySelector('input[type="hidden"]'),a="all"==i.value?"individual":"all";i.value=a,t.classList.toggle("is-active"),e.preventDefault()}var r=e.target.closest(".mzldr-mp-type-btn");if(r){var n=r.getAttribute("data-type");r.parentNode.querySelectorAll(".mzldr-mp-type-btn").forEach(function(e){e.classList.remove("is-active")}),r.classList.add("is-active"),r.parentNode.querySelector('input[type="hidden"]').value=n,e.preventDefault()}})},t.handleOnLoadColorPickers=function(){var t=this;document.querySelectorAll(".mzldr-control-color-picker-item:not(.is-loaded)").forEach(function(e){t.renderColorPicker(e)})},t.renderColorPicker=function(u){var m=this;if(!u.classList.contains("is-loaded")){var p=u.getAttribute("data-field-id");u.classList.add("is-loaded"),jQuery(u).wpColorPicker({change:function(e,t){var i=u.getAttribute("data-bind-reason"),a=u.getAttribute("data-bind-target"),r=u.getAttribute("data-bind-context"),n=u.getAttribute("data-bind-css-attribute"),d=t.color.toString();if("loader_css_attribute_change"==i){if("background"==n){var o=document.querySelector(".mazloader-items .mazloader-item");if(o)if(a)try{(a=JSON.parse(a)).forEach(function(e){if("background_color_overlay"==r){if(!o.querySelector(e))return;o.querySelector(e).classList.add("is-visible")}o.querySelector(e)&&(o.querySelector(e).style.backgroundColor=d)})}catch(e){if("background_color_overlay"==r){if(!o.querySelector(a))return;o.querySelector(a).classList.add("is-visible")}o.querySelector(a)&&(o.querySelector(a).style.backgroundColor=d)}else o.style.backgroundColor=d}}else if("field_css_attribute_change"==i){var s="image"==r?"image":"loader_field",l=m.getFieldElement(s,p);if(!l)return;a?"background"==n?l.querySelector(a).style.backgroundColor=d:"color"==n&&(l.querySelector(a).style.color=d):"background"==n?l.style.backgroundColor=d:"color"==n&&(l.style.color=d)}},clear:function(e){var t=u.getAttribute("data-bind-reason"),i=u.getAttribute("data-bind-target"),a=u.getAttribute("data-bind-context"),r=u.getAttribute("data-bind-css-attribute");if("loader_css_attribute_change"==t){if("background"==r){var n=document.querySelector(".mazloader-items .mazloader-item");n&&(i?("background_color_overlay"==a&&n.querySelector(i).classList.remove("is-visible"),n.querySelector(i).style.backgroundColor=""):n.style.backgroundColor="")}}else if("field_css_attribute_change"==t){var d=u.getAttribute("data-bind-context"),o=u.getAttribute("data-bind-target"),s=u.getAttribute("placeholder"),l="image"==d?"image":"loader_field",c=m.getFieldElement(l,p);if(!c)return;o?c.querySelector(o).style.backgroundColor=s:"background"==r?c.style.backgroundColor="":"color"==r&&(c.style.color="")}}})}},t.handleImagePicker=function(){var n=this;document.addEventListener("click",function(e){var a=e.target;if(a.classList.contains("mzldr-image-upload-button")){var r=a.parentNode;n.media_uploader=wp.media.frames.file_frame=wp.media({title:mzldr_builder_vars.media_uploader_title,button:{text:mzldr_builder_vars.media_uploader_button},multiple:!1}),n.media_uploader.on("select",function(){var e=n.media_uploader.state().get("selection").first().toJSON();r.querySelector("img").src=e.url,r.querySelector(".mlzdr-background-image-preview").classList.add("is-visible"),r.querySelector('input[type="hidden"]').setAttribute("value",e.url);var t=a.getAttribute("data-bind-type");if("loader_field_image_src_change"==t){var i=a.closest(".settings").getAttribute("data-field-id");n.getFieldElement("image",i).src=e.url}else if("loader_bg_image"==t){document.querySelector(".mazloader-item").style.background="url('"+e.url+"')"}}),n.media_uploader.open()}})},t.getFieldElement=function(e,t){return"image"==e?document.querySelector('.mazloader-items .mazloader-item .mazloader-item-wrapper[data-field-id="'+t+'"] .mazloader-item-image img'):(e="loader_field")?document.querySelector('.mazloader-items .mazloader-item .mazloader-item-wrapper[data-field-id="'+t+'"] .mazloader-inner-item'):void 0},t.handleRangeSliders=function(){document.addEventListener("mouseover",function(e){var t=e.target.closest(".mzldr-range-slider-item");if(t){if(t.classList.contains("is-loaded"))return;t.classList.add("is-loaded"),new MAZ_Loader_Admin_UI_Range_Slider(t).renderRangeSlider()}})},t.handleImageResetButton=function(){var s=mzldr_js_object.ADMIN_MEDIA_URL+"img/placeholder.jpg";document.addEventListener("click",function(e){var t=e.target;if(t.classList.contains("mzldr-image-field-reset-button")){var i=t.previousElementSibling,a=i.getAttribute("data-bind-custom-event");a="1"==a;var r=i.getAttribute("data-bind-type");if(a)if("loader_field_image_src_change"==r){var n=t.closest(".settings").getAttribute("data-field-id");document.querySelector('.mazloader-item .mazloader-item-wrapper[data-field-id="'+n+'"] img').src=s}else if("loader_bg_image"==r){var d=document.querySelector(".mzldr-loader-appearance-bg-color").value||"";document.querySelector(".mazloader-item").style.background=d}var o=t.closest(".mzldr-control-group");o.querySelector("img").src="loader_bg_image"!=r?s:"",o.querySelector(".mlzdr-background-image-preview").classList.add("is-visible"),o.querySelector('input[type="hidden"]').value="",e.preventDefault()}})},e}();Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null}),function(){if("function"==typeof window.CustomEvent)return;function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i}e.prototype=window.Event.prototype,window.CustomEvent=e}(),function(){if("function"==typeof NodeList.prototype.forEach)return;NodeList.prototype.forEach=Array.prototype.forEach}();
